@page
@model alasos.Pages.RegisterModel
@{
}

<h1>Register User</h1>

<script type="text/javascript"
        src="https://npmcdn.com/parse/dist/parse.min.js"></script>


<div class="container">

    <input id="username" type="text" placeholder="Username" />
    <input id="password" type="text" placeholder="Password" />
    <br />
    <input id="name" type="text" placeholder="Name" />
    <input id="email" type="email" placeholder="Email" />
    <br />
    <button id="createButton">Create User</button>

</div>

<script>
    // Initialize Parse
    Parse.initialize("HvzrJkjsa2qdjRy9auBDdCB70BdAFSHyNPUhQWiG", "kXDz3UWCXJ17njfb4vwjZ7e7QWPKfIHTk7yXuY9j"); //PASTE HERE YOUR Back4App APPLICATION ID AND YOUR JavaScript KEY
    Parse.serverURL = "https://parseapi.back4app.com/";

    // Create a new User
    async function createParseUser() {
        // Creates a new Parse "User" object, which is created by default in your Parse app
        let user = new Parse.User();
        // Set the input values to the new "User" object
        user.set("name", document.getElementById("name").value);
        user.set("username", document.getElementById("username").value);
        user.set("password", document.getElementById("password").value);
        user.set("email", document.getElementById("email").value);

        try {
            // Call the save method, which returns the saved object if successful
            user = await user.save();
            if (user !== null) {
                // Notify the success by getting the attributes from the "User" object, by using the get method (the id attribute needs to be accessed directly, though)
                alert(
                    `New object created with success! ObjectId: ${user.id
                    }, ${user.get("username")}`
                );
            }
        } catch (error) {
            alert(`Error: ${error.message}`);
        }
    }

    // Add on click listener to call the create parse user function
    document.getElementById("createButton").addEventListener("click", async function () {
        createParseUser();
    });
</script>